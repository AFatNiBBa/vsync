
<!DOCTYPE html>
<html lang="en">
    <head>
        <title> Sync Player </title>
        <link rel="icon" href="./icon.png">
        
        <!-- JQuery -->
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>

        <!-- Bootstrap -->
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
        <style>
            @import url("https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css");     /* Bootstrap */
            @import url("https://cdn.jsdelivr.net/gh/hung1001/font-awesome-pro@5.15.3/css/all.css");    /* Font Awesome */
            
            /* Stile Personalizzato */
            .shadow { box-shadow: 0 .125rem .25rem rgba(0,0,0,.075) !important }

            .btn:hover {
                background-color: white !important;
                color: black !important;
            }
        </style>

        <!-- Preset -->
        <script>
            // Carica la pagina sicura perchè "navigator.clipboard" sta solo su quella
            if (!navigator.clipboard)
                location.protocol = "https:";
        </script>
    </head>
    <body>
        <div id="root"></div>
        <script type="module">
            import { render } from "solid-js/web";
            import { args } from '../lib/env';
            import Synchronizer from '../lib/synchronizer';
            import App from '../components/index';

            // Imposta i parametri di default
            args.room ??= Synchronizer.uuid();
            args.link ??= "https://work.streamingaw.online/DDL/ANIME/ShingekiNoKyojin4SUBITA/ShingekiNoKyojin4_Ep_02_SUB_ITA.mp4"

            // Renderizza la pagina
            render(App, document.getElementById("root"));

            // Inizializzazione variabili globali
            globalThis.video = $("video")[0];
            globalThis.sync = new Synchronizer(video, args);

            // Abilita la descrizione durante l'hover
            $("[title]").tooltip();

            // Aggiunge le ombre sugli elementi della form
            $("input, button").addClass("shadow");

            // Fa sì che il video skippi 10s per volta
            $(document).on("keydown", e => {
                switch (e.keyCode)
                {
                    case 37: // Left
                       sync.video.currentTime -= 10;
                    break;
                    case 39: // Right
                        sync.video.currentTime += 10;
                    break
                }
            });
        </script>
    </body>
</html>